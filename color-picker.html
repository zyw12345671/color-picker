<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>È´òÁ∫ßÈ¢úËâ≤ÈÄâÊã©Âô®</title>
    <style>
        :root {
            --primary-color: #4a6cf7;
            --secondary-color: #f5f8ff;
            --text-color: #333;
            --border-color: #ddd;
            --shadow-color: rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            width: 100%;
            max-width: 1000px;
            background-color: #fff;
            border-radius: 15px;
            box-shadow: 0 10px 30px var(--shadow-color);
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .header {
            background: var(--primary-color);
            color: white;
            padding: 20px;
            text-align: center;
            font-size: 24px;
            font-weight: 600;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            position: relative;
        }

        .content {
            display: flex;
            flex-wrap: wrap;
            padding: 20px;
            gap: 20px;
        }

        .left-panel, .right-panel {
            flex: 1;
            min-width: 300px;
        }

        .color-preview {
            height: 200px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 4px 10px var(--shadow-color);
            position: relative;
            overflow: hidden;
            transition: var(--transition);
        }

        .color-values {
            background-color: var(--secondary-color);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 4px 10px var(--shadow-color);
        }

        .color-value-group {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .color-value-group label {
            width: 80px;
            font-weight: 600;
            color: var(--text-color);
        }

        .color-value-group input[type="text"] {
            flex: 1;
            padding: 8px 12px;
            border: 1px solid var(--border-color);
            border-radius: 5px;
            font-size: 14px;
            transition: var(--transition);
        }

        .color-value-group input[type="text"]:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 2px rgba(74, 108, 247, 0.2);
            outline: none;
        }

        .color-value-group button {
            margin-left: 10px;
            padding: 8px 12px;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: var(--transition);
        }

        .color-value-group button:hover {
            background-color: #3a5ce4;
        }

        .slider-container {
            margin-bottom: 20px;
            background-color: var(--secondary-color);
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 4px 10px var(--shadow-color);
        }

        .slider-group {
            margin-bottom: 15px;
        }

        .slider-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: var(--text-color);
        }

        .slider-row {
            display: flex;
            align-items: center;
        }

        .slider-row input[type="range"] {
            flex: 1;
            height: 8px;
            -webkit-appearance: none;
            appearance: none;
            background: #ddd;
            outline: none;
            border-radius: 4px;
            transition: var(--transition);
        }

        .slider-row input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--primary-color);
            cursor: pointer;
            transition: var(--transition);
        }

        .slider-row input[type="range"]::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--primary-color);
            cursor: pointer;
            transition: var(--transition);
        }

        .slider-row input[type="range"]:hover::-webkit-slider-thumb {
            transform: scale(1.1);
        }

        .slider-row input[type="range"]:hover::-moz-range-thumb {
            transform: scale(1.1);
        }

        .slider-row input[type="number"] {
            width: 60px;
            margin-left: 15px;
            padding: 5px;
            border: 1px solid var(--border-color);
            border-radius: 5px;
            text-align: center;
        }

        .color-picker-container {
            background-color: var(--secondary-color);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 4px 10px var(--shadow-color);
        }

        .color-picker-container h3 {
            margin-bottom: 15px;
            color: var(--text-color);
        }

        .color-wheel {
            width: 100%;
            height: 200px;
            position: relative;
            margin-bottom: 15px;
            border-radius: 10px;
            overflow: hidden;
        }

        canvas {
            display: block;
            border-radius: 10px;
            cursor: crosshair;
        }

        .eyedropper-tool {
            margin-top: 15px;
            text-align: center;
        }

        .eyedropper-button {
            padding: 10px 20px;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .eyedropper-button:hover {
            background-color: #3a5ce4;
        }

        .eyedropper-button svg {
            width: 18px;
            height: 18px;
        }

        .color-history {
            background-color: var(--secondary-color);
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 4px 10px var(--shadow-color);
            margin-top: 20px;
            display: flex;
            flex-direction: column;
        }

        .color-history h3 {
            margin-bottom: 15px;
            color: var(--text-color);
        }

        .history-colors {
            flex: 1;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(40px, 1fr));
            gap: 10px;
        }

        .history-color {
            width: 100%;
            aspect-ratio: 1;
            border-radius: 5px;
            cursor: pointer;
            transition: var(--transition);
            border: 1px solid var(--border-color);
        }

        .history-color:hover {
            transform: scale(1.1);
            box-shadow: 0 2px 5px var(--shadow-color);
        }

        .tooltip {
            position: absolute;
            background-color: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 12px;
            pointer-events: none;
            z-index: 100;
            opacity: 0;
            transition: opacity 0.2s;
        }

        .color-harmony {
            background-color: var(--secondary-color);
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
            box-shadow: 0 4px 10px var(--shadow-color);
        }

        .color-harmony h3 {
            margin-bottom: 15px;
            color: var(--text-color);
        }

        .harmony-options {
            display: flex;
            gap: 5px;
            margin-bottom: 15px;
            flex-wrap: nowrap;
            justify-content: space-between;
        }

        .harmony-option {
            padding: 6px 8px;
            background-color: white;
            border: 1px solid var(--border-color);
            border-radius: 5px;
            cursor: pointer;
            transition: var(--transition);
            font-size: 12px;
            text-align: center;
            flex: 1;
        }

        .harmony-option.active {
            background-color: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .harmony-colors {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
        }

        .harmony-color {
            height: 40px;
            border-radius: 5px;
            cursor: pointer;
            transition: var(--transition);
        }

        .harmony-color:hover {
            transform: translateY(-3px);
            box-shadow: 0 3px 8px var(--shadow-color);
        }

        .theme-switch {
            position: absolute;
            top: 20px;
            right: 20px;
            cursor: pointer;
            color: white;
            font-size: 20px;
        }

        .dark-mode {
            --primary-color: #7289da;
            --secondary-color: #2f3136;
            --text-color: #dcddde;
            --border-color: #40444b;
            --shadow-color: rgba(0, 0, 0, 0.3);
            background: linear-gradient(135deg, #2c2f33 0%, #23272a 100%);
        }

        .dark-mode .container {
            background-color: #36393f;
        }

        .dark-mode .color-value-group input[type="text"],
        .dark-mode .slider-row input[type="number"] {
            background-color: #40444b;
            color: #dcddde;
            border-color: #4f545c;
        }

        .dark-mode .harmony-option {
            background-color: #40444b;
            color: #dcddde;
        }

        @media (max-width: 768px) {
            .content {
                flex-direction: column;
            }
            
            .left-panel, .right-panel {
                width: 100%;
            }
            
            .color-wheel {
                height: 150px;
            }
        }

        /* Âä®ÁîªÊïàÊûú */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .container {
            animation: fadeIn 0.5s ease-out;
        }

        .notification {
            position: fixed;
            bottom: 20px;
            right: 20px;
            padding: 15px 20px;
            background-color: var(--primary-color);
            color: white;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            transform: translateX(120%);
            transition: transform 0.3s ease-out;
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification-icon {
            font-size: 20px;
        }

        .notification-message {
            flex: 1;
        }

        .notification-close {
            cursor: pointer;
            font-size: 18px;
            opacity: 0.8;
            transition: opacity 0.2s;
        }

        .notification-close:hover {
            opacity: 1;
        }
        
        .gradient-options {
            margin-bottom: 15px;
        }

        .gradient-type-options {
            display: flex;
            gap: 5px;
            margin-bottom: 10px;
            justify-content: space-between;
        }

        .gradient-option {
            padding: 6px 8px;
            background-color: white;
            border: 1px solid var(--border-color);
            border-radius: 5px;
            cursor: pointer;
            transition: var(--transition);
            font-size: 12px;
            text-align: center;
            flex: 1;
        }

        .gradient-option.active {
            background-color: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .gradient-direction-options {
            display: flex;
            gap: 5px;
            justify-content: center;
            margin-top: 10px;
        }

        .direction-option {
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: white;
            border: 1px solid var(--border-color);
            border-radius: 5px;
            cursor: pointer;
            transition: var(--transition);
        }

        .direction-option.active {
            background-color: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .small-button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 5px;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 18px;
            transition: var(--transition);
        }

        .small-button:hover {
            background-color: #3a5ce4;
        }

        .color-stops-container {
            display: flex;
            align-items: center;
            margin-top: 10px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .color-stop {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .color-stop input[type="color"] {
            width: 30px;
            height: 30px;
        }

        .color-stop input[type="number"] {
            width: 50px;
        }

        .remove-stop {
            color: #ff4d4d;
            cursor: pointer;
            font-size: 18px;
        }

        /*ÂæÑÂêëÊ∏êÂèòÂúÜÂΩ¢ÂíåÊ§≠ÂúÜÈÄâÈ°πÊ†∑Âºè*/
        .radial-direction-options {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 10px;
        }

        .radial-direction-option {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: white;
            border: 1px solid var(--border-color);
            border-radius: 5px;
            cursor: pointer;
            transition: var(--transition);
        }

        .radial-direction-option.active {
            background-color: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .radial-direction-option svg {
            width: 24px;
            height: 24px;
        }

        .color-presets {
            background-color: var(--secondary-color);
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 4px 10px var(--shadow-color);
            margin-top: 20px;
            display: flex;
            flex-direction: column;
        }

        .color-presets h3 {
            margin-bottom: 15px;
            color: var(--text-color);
        }

        .presets-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .preset-category {
            margin-bottom: 15px;
        }

        .preset-category:last-child {
            margin-bottom: 0;
        }

        .preset-category h4 {
            font-size: 14px;
            margin-bottom: 8px;
            color: var(--text-color);
            opacity: 0.8;
        }

        .preset-colors {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
        }

        .preset-color {
            height: 30px;
            border-radius: 5px;
            cursor: pointer;
            transition: transform 0.2s;
            border: 1px solid var(--border-color);
        }

        .preset-color:hover {
            transform: scale(1.05);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            È´òÁ∫ßÈ¢úËâ≤ÈÄâÊã©Âô®
            <div class="theme-switch" id="themeSwitch">üåì</div>
        </div>
        <div class="content">
            <div class="left-panel">
                <div class="color-preview" id="colorPreview"></div>
                
                <div class="color-values">
                    <div class="color-value-group">
                        <label for="hexValue">HEX</label>
                        <input type="text" id="hexValue" value="#4a6cf7">
                        <button id="copyHex">Â§çÂà∂</button>
                    </div>
                    <div class="color-value-group">
                        <label for="rgbValue">RGB</label>
                        <input type="text" id="rgbValue" value="rgb(74, 108, 247)">
                        <button id="copyRgb">Â§çÂà∂</button>
                    </div>
                    <div class="color-value-group">
                        <label for="hslValue">HSL</label>
                        <input type="text" id="hslValue" value="hsl(230, 91%, 63%)">
                        <button id="copyHsl">Â§çÂà∂</button>
                    </div>
                </div>
                
                <div class="slider-container">
                    <div class="slider-group">
                        <label for="redSlider">Á∫¢Ëâ≤ (R)</label>
                        <div class="slider-row">
                            <input type="range" id="redSlider" min="0" max="255" value="74">
                            <input type="number" id="redValue" min="0" max="255" value="74">
                        </div>
                    </div>
                    <div class="slider-group">
                        <label for="greenSlider">ÁªøËâ≤ (G)</label>
                        <div class="slider-row">
                            <input type="range" id="greenSlider" min="0" max="255" value="108">
                            <input type="number" id="greenValue" min="0" max="255" value="108">
                        </div>
                    </div>
                    <div class="slider-group">
                        <label for="blueSlider">ËìùËâ≤ (B)</label>
                        <div class="slider-row">
                            <input type="range" id="blueSlider" min="0" max="255" value="247">
                            <input type="number" id="blueValue" min="0" max="255" value="247">
                        </div>
                    </div>
                </div>
                
                <div class="slider-container">
                    <div class="slider-group">
                        <label for="hueSlider">Ëâ≤Áõ∏ (H)</label>
                        <div class="slider-row">
                            <input type="range" id="hueSlider" min="0" max="360" value="230">
                            <input type="number" id="hueValue" min="0" max="360" value="230">
                        </div>
                    </div>
                    <div class="slider-group">
                        <label for="saturationSlider">È•±ÂíåÂ∫¶ (S)</label>
                        <div class="slider-row">
                            <input type="range" id="saturationSlider" min="0" max="100" value="91">
                            <input type="number" id="saturationValue" min="0" max="100" value="91">
                        </div>
                    </div>
                    <div class="slider-group">
                        <label for="lightnessSlider">‰∫ÆÂ∫¶ (L)</label>
                        <div class="slider-row">
                            <input type="range" id="lightnessSlider" min="0" max="100" value="63">
                            <input type="number" id="lightnessValue" min="0" max="100" value="63">
                        </div>
                    </div>
                </div>
                
                <div class="color-history">
                    <h3>È¢úËâ≤ÂéÜÂè≤</h3>
                    <div class="history-colors" id="colorHistory"></div>
                </div>
            </div>
            
            <div class="right-panel">
                <div class="color-picker-container">
                    <h3>È¢úËâ≤ÈÄâÊã©Âô®</h3>
                    <div class="color-wheel" id="colorWheel">
                        <canvas id="colorCanvas"></canvas>
                    </div>
                    
                    <div class="eyedropper-tool">
                        <button class="eyedropper-button" id="eyedropperButton">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M18 16.5l-6-6L3 19.5V21h1.5l9-9 6 6-1.5 1.5z"></path>
                                <path d="M16 2L9 9"></path>
                                <path d="M21 7l-6-6"></path>
                            </svg>
                            Â±èÂπïÂèñËâ≤
                        </button>
                    </div>
                </div>
                
                <div class="color-harmony">
                    <h3>È¢úËâ≤ÂíåË∞ê</h3>
                    <div class="harmony-options">
                        <div class="harmony-option active" data-harmony="complementary">‰∫íË°•Ëâ≤</div>
                        <div class="harmony-option" data-harmony="analogous">Á±ª‰ººËâ≤</div>
                        <div class="harmony-option" data-harmony="triadic">‰∏âÁ≠âÂàÜËâ≤</div>
                        <div class="harmony-option" data-harmony="split-complementary">ÂàÜË£Ç‰∫íË°•Ëâ≤</div>
                        <div class="harmony-option" data-harmony="tetradic">ÂõõÁ≠âÂàÜËâ≤</div>
                    </div>
                    <div class="harmony-colors" id="harmonyColors"></div>
                </div>
                
                <div class="color-picker-container" style="margin-top: 20px;">
                    <h3>È¢úËâ≤Ê∏êÂèò</h3>
                    
                    <div class="gradient-options">
                        <div class="gradient-type-options">
                            <div class="gradient-option active" data-type="linear">Á∫øÊÄßÊ∏êÂèò</div>
                            <div class="gradient-option" data-type="radial">ÂæÑÂêëÊ∏êÂèò</div>
                            <div class="gradient-option" data-type="conic">ËßíÂ∫¶Ê∏êÂèò</div>
                        </div>
                        
                        <div class="gradient-direction-options" id="linearDirections">
                            <div class="direction-option active" data-direction="to right">‚Üí</div>
                            <div class="direction-option" data-direction="to bottom">‚Üì</div>
                            <div class="direction-option" data-direction="to right bottom">‚Üò</div>
                            <div class="direction-option" data-direction="to left bottom">‚Üô</div>
                        </div>
                        
                        <div class="radial-direction-options" id="radialDirections" style="display: none;">
                            <div class="radial-direction-option active" data-shape="circle">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <circle cx="12" cy="12" r="10"></circle>
                                </svg>
                            </div>
                            <div class="radial-direction-option" data-shape="ellipse">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <ellipse cx="12" cy="12" rx="10" ry="6"></ellipse>
                                </svg>
                            </div>
                        </div>
                    </div>
                    
                    <canvas id="gradientCanvas" height="80" style="width: 100%; border-radius: 10px; margin-top: 10px;"></canvas>
                    <div style="display: flex; justify-content: space-between; margin-top: 10px;">
                        <input type="color" id="gradientColor1" value="#4a6cf7">
                        <button id="addColorStop" class="small-button">+</button>
                        <input type="color" id="gradientColor2" value="#f5f8ff">
                    </div>
                    <div id="gradientColorStops" class="color-stops-container"></div>
                </div>
                
                <div class="color-presets">
                    <h3>È¢úËâ≤È¢ÑËÆæ</h3>
                    <div class="presets-container">
                        <div class="preset-category">
                            <h4>ÊùêË¥®È£éÊ†º</h4>
                            <div class="preset-colors">
                                <div class="preset-color" style="background: linear-gradient(to right, #f6d365, #fda085);" data-colors="#f6d365,#fda085"></div>
                                <div class="preset-color" style="background: linear-gradient(to right, #a1c4fd, #c2e9fb);" data-colors="#a1c4fd,#c2e9fb"></div>
                                <div class="preset-color" style="background: linear-gradient(to right, #84fab0, #8fd3f4);" data-colors="#84fab0,#8fd3f4"></div>
                                <div class="preset-color" style="background: linear-gradient(to right, #a6c0fe, #f68084);" data-colors="#a6c0fe,#f68084"></div>
                            </div>
                        </div>
                        <div class="preset-category">
                            <h4>ÊµÅË°åÈÖçËâ≤</h4>
                            <div class="preset-colors">
                                <div class="preset-color" style="background: linear-gradient(to right, #4a6cf7, #f5f8ff);" data-colors="#4a6cf7,#f5f8ff"></div>
                                <div class="preset-color" style="background: linear-gradient(to right, #00c6fb, #005bea);" data-colors="#00c6fb,#005bea"></div>
                                <div class="preset-color" style="background: linear-gradient(to right, #ff758c, #ff7eb3);" data-colors="#ff758c,#ff7eb3"></div>
                                <div class="preset-color" style="background: linear-gradient(to right, #16a085, #f4d03f);" data-colors="#16a085,#f4d03f"></div>
                            </div>
                        </div>
                        <div class="preset-category">
                            <h4>ÈÖçËâ≤ÊñπÊ°à</h4>
                            <div class="preset-colors">
                                <div class="preset-color" style="background: linear-gradient(to right, #3498db, #2980b9, #1abc9c, #16a085);" data-colors="#3498db,#2980b9,#1abc9c,#16a085"></div>
                                <div class="preset-color" style="background: linear-gradient(to right, #e74c3c, #c0392b, #f39c12, #d35400);" data-colors="#e74c3c,#c0392b,#f39c12,#d35400"></div>
                                <div class="preset-color" style="background: linear-gradient(to right, #9b59b6, #8e44ad, #2c3e50, #34495e);" data-colors="#9b59b6,#8e44ad,#2c3e50,#34495e"></div>
                                <div class="preset-color" style="background: linear-gradient(to right, #2ecc71, #27ae60, #f1c40f, #f39c12);" data-colors="#2ecc71,#27ae60,#f1c40f,#f39c12"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="tooltip" id="tooltip"></div>
    <div class="notification" id="notification">
        <div class="notification-icon">‚úì</div>
        <div class="notification-message" id="notificationMessage"></div>
        <div class="notification-close" id="notificationClose">√ó</div>
    </div>

    <script>
        // Ê∏êÂèòÁõ∏ÂÖ≥ÂèòÈáè
        let gradientType = 'linear';
        let gradientDirection = 'to right';
        let radialShape = 'circle';
        let gradientColors = [
            { color: '#4a6cf7', position: 0 },
            { color: '#f5f8ff', position: 100 }
        ];

        // Êõ¥Êñ∞Ê∏êÂèòÂáΩÊï∞
        function updateGradient() {
            const width = gradientCanvas.width;
            const height = gradientCanvas.height;
            gradientCtx.clearRect(0, 0, width, height);
            
            let gradient;
            
            if (gradientType === 'linear') {
                // ÂàõÂª∫Á∫øÊÄßÊ∏êÂèò
                switch (gradientDirection) {
                    case 'to right':
                        gradient = gradientCtx.createLinearGradient(0, 0, width, 0);
                        break;
                    case 'to bottom':
                        gradient = gradientCtx.createLinearGradient(0, 0, 0, height);
                        break;
                    case 'to right bottom':
                        gradient = gradientCtx.createLinearGradient(0, 0, width, height);
                        break;
                    case 'to left bottom':
                        gradient = gradientCtx.createLinearGradient(width, 0, 0, height);
                        break;
                    default:
                        gradient = gradientCtx.createLinearGradient(0, 0, width, 0);
                }
            } else if (gradientType === 'radial') {
                // ÂàõÂª∫ÂæÑÂêëÊ∏êÂèò
                const centerX = width / 2;
                const centerY = height / 2;
                const radius = Math.min(width, height) / 2;
                
                if (radialShape === 'circle') {
                    gradient = gradientCtx.createRadialGradient(centerX, centerY, 0, centerX, centerY, radius);
                } else {
                    gradient = gradientCtx.createRadialGradient(centerX, centerY, 0, centerX, centerY, width / 2);
                }
            } else if (gradientType === 'conic') {
                // ÂàõÂª∫ËßíÂ∫¶Ê∏êÂèò (Ê≥®ÊÑèÔºöÊüê‰∫õÊµèËßàÂô®ÂèØËÉΩ‰∏çÊîØÊåÅ)
                const centerX = width / 2;
                const centerY = height / 2;
                
                if (typeof gradientCtx.createConicGradient === 'function') {
                    gradient = gradientCtx.createConicGradient(0, centerX, centerY);
                } else {
                    // Â¶ÇÊûú‰∏çÊîØÊåÅËßíÂ∫¶Ê∏êÂèòÔºåÈÄÄÂõûÂà∞Á∫øÊÄßÊ∏êÂèò
                    gradient = gradientCtx.createLinearGradient(0, 0, width, 0);
                }
            }
            
            // Ê∑ªÂä†Ê∏êÂèòËâ≤Ê†á
            gradientColors.forEach(stop => {
                gradient.addColorStop(stop.position / 100, stop.color);
            });
            
            gradientCtx.fillStyle = gradient;
            gradientCtx.fillRect(0, 0, width, height);
            
            // Êõ¥Êñ∞CSSÊ∏êÂèò‰ª£Á†Å
            updateGradientCode();
        }

        // Êõ¥Êñ∞Ê∏êÂèò‰ª£Á†ÅÊòæÁ§∫
        function updateGradientCode() {
            let gradientCode = '';
            
            if (gradientType === 'linear') {
                gradientCode = `linear-gradient(${gradientDirection}, `;
            } else if (gradientType === 'radial') {
                gradientCode = `radial-gradient(${radialShape} at center, `;
            } else if (gradientType === 'conic') {
                gradientCode = `conic-gradient(from 0deg at center, `;
            }
            
            gradientColors.forEach((stop, index) => {
                gradientCode += `${stop.color} ${stop.position}%`;
                if (index < gradientColors.length - 1) {
                    gradientCode += ', ';
                }
            });
            
            gradientCode += ')';
            
            // Â¶ÇÊûúÊúâÊ∏êÂèò‰ª£Á†ÅÊòæÁ§∫ÂÖÉÁ¥†ÔºåÊõ¥Êñ∞ÂÆÉ
            const gradientCodeElement = document.getElementById('gradientCode');
            if (gradientCodeElement) {
                gradientCodeElement.textContent = gradientCode;
            }
        }

        // Ê∑ªÂä†Ê∏êÂèòÈÄâÈ°π‰∫ã‰ª∂ÁõëÂê¨Âô®
        function setupGradientEvents() {
            // Ê∏êÂèòÁ±ªÂûãÈÄâÊã©
            const gradientOptions = document.querySelectorAll('.gradient-option');
            gradientOptions.forEach(option => {
                option.addEventListener('click', () => {
                    gradientOptions.forEach(opt => opt.classList.remove('active'));
                    option.classList.add('active');
                    
                    gradientType = option.dataset.type;
                    
                    // ÊòæÁ§∫/ÈöêËóèÁõ∏Â∫îÁöÑÊñπÂêëÈÄâÈ°π
                    if (gradientType === 'linear') {
                        document.getElementById('linearDirections').style.display = 'flex';
                        document.getElementById('radialDirections').style.display = 'none';
                    } else if (gradientType === 'radial') {
                        document.getElementById('linearDirections').style.display = 'none';
                        document.getElementById('radialDirections').style.display = 'flex';
                    } else {
                        document.getElementById('linearDirections').style.display = 'none';
                        document.getElementById('radialDirections').style.display = 'none';
                    }
                    
                    updateGradient();
                });
            });
            
            // Á∫øÊÄßÊ∏êÂèòÊñπÂêëÈÄâÊã©
            const linearDirections = document.querySelectorAll('#linearDirections .direction-option');
            linearDirections.forEach(direction => {
                direction.addEventListener('click', () => {
                    linearDirections.forEach(dir => dir.classList.remove('active'));
                    direction.classList.add('active');
                    
                    gradientDirection = direction.dataset.direction;
                    updateGradient();
                });
            });
            
            // ÂæÑÂêëÊ∏êÂèòÂΩ¢Áä∂ÈÄâÊã©
            const radialDirections = document.querySelectorAll('#radialDirections .radial-direction-option');
            radialDirections.forEach(shape => {
                shape.addEventListener('click', () => {
                    radialDirections.forEach(s => s.classList.remove('active'));
                    shape.classList.add('active');
                    
                    radialShape = shape.dataset.shape;
                    updateGradient();
                });
            });
            
            // Ê∑ªÂä†Ëâ≤Ê†áÊåâÈíÆ
            document.getElementById('addColorStop').addEventListener('click', () => {
                if (gradientColors.length < 5) { // ÈôêÂà∂ÊúÄÂ§ö5‰∏™Ëâ≤Ê†á
                    const newColor = '#ffffff';
                    const newPosition = 50; // ÈªòËÆ§Âú®‰∏≠Èó¥
                    
                    gradientColors.push({ color: newColor, position: newPosition });
                    gradientColors.sort((a, b) => a.position - b.position);
                    
                    updateGradientColorStops();
                    updateGradient();
                }
            });
            
            // ÂàùÂßãÊ∏êÂèòËâ≤Ê†áËæìÂÖ•
            gradientColor1.addEventListener('input', () => {
                gradientColors[0].color = gradientColor1.value;
                updateGradient();
            });
            
            gradientColor2.addEventListener('input', () => {
                gradientColors[gradientColors.length - 1].color = gradientColor2.value;
                updateGradient();
            });
        }

        // Êõ¥Êñ∞Ê∏êÂèòËâ≤Ê†áÊòæÁ§∫
        function updateGradientColorStops() {
            const container = document.getElementById('gradientColorStops');
            container.innerHTML = '';
            
            // Âè™ÊòæÁ§∫È¢ùÂ§ñÊ∑ªÂä†ÁöÑËâ≤Ê†áÔºàÁ¨¨‰∏Ä‰∏™ÂíåÊúÄÂêé‰∏Ä‰∏™Â∑≤ÁªèÊúâ‰∏ìÈó®ÁöÑËæìÂÖ•Ê°ÜÔºâ
            for (let i = 1; i < gradientColors.length - 1; i++) {
                const stop = gradientColors[i];
                
                const stopElement = document.createElement('div');
                stopElement.className = 'color-stop';
                
                const colorInput = document.createElement('input');
                colorInput.type = 'color';
                colorInput.value = stop.color;
                colorInput.addEventListener('input', () => {
                    stop.color = colorInput.value;
                    updateGradient();
                });
                
                const positionInput = document.createElement('input');
                positionInput.type = 'number';
                positionInput.min = 0;
                positionInput.max = 100;
                positionInput.value = stop.position;
                positionInput.addEventListener('change', () => {
                    stop.position = Math.max(0, Math.min(100, parseInt(positionInput.value)));
                    positionInput.value = stop.position;
                    gradientColors.sort((a, b) => a.position - b.position);
                    updateGradientColorStops();
                    updateGradient();
                });
                
                const removeButton = document.createElement('span');
                removeButton.className = 'remove-stop';
                removeButton.textContent = '√ó';
                removeButton.addEventListener('click', () => {
                    gradientColors.splice(i, 1);
                    updateGradientColorStops();
                    updateGradient();
                });
                
                stopElement.appendChild(colorInput);
                stopElement.appendChild(positionInput);
                stopElement.appendChild(removeButton);
                
                container.appendChild(stopElement);
            }
        }
        
        // ‰∏ªË¶ÅÂèòÈáè
        let currentColor = {
            r: 74,
            g: 108,
            b: 247,
            h: 230,
            s: 91,
            l: 63
        };
        
        let colorHistory = [];
        const maxHistoryItems = 24;
        
        // DOM ÂÖÉÁ¥†
        const colorPreview = document.getElementById('colorPreview');
        const hexValue = document.getElementById('hexValue');
        const rgbValue = document.getElementById('rgbValue');
        const hslValue = document.getElementById('hslValue');
        
        const redSlider = document.getElementById('redSlider');
        const greenSlider = document.getElementById('greenSlider');
        const blueSlider = document.getElementById('blueSlider');
        const redValue = document.getElementById('redValue');
        const greenValue = document.getElementById('greenValue');
        const blueValue = document.getElementById('blueValue');
        
        const hueSlider = document.getElementById('hueSlider');
        const saturationSlider = document.getElementById('saturationSlider');
        const lightnessSlider = document.getElementById('lightnessSlider');
        const hueValue = document.getElementById('hueValue');
        const saturationValue = document.getElementById('saturationValue');
        const lightnessValue = document.getElementById('lightnessValue');
        
        const colorCanvas = document.getElementById('colorCanvas');
        const colorWheel = document.getElementById('colorWheel');
        const ctx = colorCanvas.getContext('2d');
        
        const colorHistoryContainer = document.getElementById('colorHistory');
        const harmonyColors = document.getElementById('harmonyColors');
        const harmonyOptions = document.querySelectorAll('.harmony-option');
        
        const gradientCanvas = document.getElementById('gradientCanvas');
        const gradientCtx = gradientCanvas.getContext('2d');
        const gradientColor1 = document.getElementById('gradientColor1');
        const gradientColor2 = document.getElementById('gradientColor2');
        
        const eyedropperButton = document.getElementById('eyedropperButton');
        const themeSwitch = document.getElementById('themeSwitch');
        const tooltip = document.getElementById('tooltip');
        
        const notification = document.getElementById('notification');
        const notificationMessage = document.getElementById('notificationMessage');
        const notificationClose = document.getElementById('notificationClose');
        
        // È¢úËâ≤ËΩ¨Êç¢ÂáΩÊï∞
        function rgbToHex(r, g, b) {
            return `#${((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1)}`;
        }
        
        function hexToRgb(hex) {
            const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
            return result ? {
                r: parseInt(result[1], 16),
                g: parseInt(result[2], 16),
                b: parseInt(result[3], 16)
            } : null;
        }
        
        function rgbToHsl(r, g, b) {
            r /= 255;
            g /= 255;
            b /= 255;
            
            const max = Math.max(r, g, b);
            const min = Math.min(r, g, b);
            let h, s, l = (max + min) / 2;
            
            if (max === min) {
                h = s = 0; // ÁÅ∞Ëâ≤
            } else {
                const d = max - min;
                s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
                
                switch (max) {
                    case r: h = (g - b) / d + (g < b ? 6 : 0); break;
                    case g: h = (b - r) / d + 2; break;
                    case b: h = (r - g) / d + 4; break;
                }
                
                h /= 6;
            }
            
            return {
                h: Math.round(h * 360),
                s: Math.round(s * 100),
                l: Math.round(l * 100)
            };
        }
        
        function hslToRgb(h, s, l) {
            h /= 360;
            s /= 100;
            l /= 100;
            
            let r, g, b;
            
            if (s === 0) {
                r = g = b = l; // ÁÅ∞Ëâ≤
            } else {
                const hue2rgb = (p, q, t) => {
                    if (t < 0) t += 1;
                    if (t > 1) t -= 1;
                    if (t < 1/6) return p + (q - p) * 6 * t;
                    if (t < 1/2) return q;
                    if (t < 2/3) return p + (q - p) * (2/3 - t) * 6;
                    return p;
                };
                
                const q = l < 0.5 ? l * (1 + s) : l + s - l * s;
                const p = 2 * l - q;
                
                r = hue2rgb(p, q, h + 1/3);
                g = hue2rgb(p, q, h);
                b = hue2rgb(p, q, h - 1/3);
            }
            
            return {
                r: Math.round(r * 255),
                g: Math.round(g * 255),
                b: Math.round(b * 255)
            };
        }
        
        // ÂàùÂßãÂåñ
        function init() {
            // ËÆæÁΩÆÁîªÂ∏ÉÂ∞∫ÂØ∏
            resizeCanvas();
            window.addEventListener('resize', resizeCanvas);
            
            // ÁªòÂà∂È¢úËâ≤ËΩÆ
            drawColorWheel();
            
            // ÂàùÂßãÂåñÈ¢úËâ≤È¢ÑËßà
            updateColorPreview();
            
            // ÂàùÂßãÂåñÊ∏êÂèò
            updateGradient();
            
            // ÂàùÂßãÂåñÈ¢úËâ≤ÂíåË∞ê
            updateHarmonyColors();
            
            // ‰ªéÊú¨Âú∞Â≠òÂÇ®Âä†ËΩΩÈ¢úËâ≤ÂéÜÂè≤
            loadColorHistory();
            
            // ËÆæÁΩÆ‰∫ã‰ª∂ÁõëÂê¨Âô®
            setupEventListeners();
            setupGradientEvents();
            setupPresetEvents();
        }
        
        // ËÆæÁΩÆÁîªÂ∏ÉÂ∞∫ÂØ∏
        function resizeCanvas() {
            colorCanvas.width = colorWheel.clientWidth;
            colorCanvas.height = colorWheel.clientHeight;
            gradientCanvas.width = gradientCanvas.parentElement.clientWidth;
            
            drawColorWheel();
            updateGradient();
        }
        
        // ÁªòÂà∂È¢úËâ≤ËΩÆ
        function drawColorWheel() {
            const width = colorCanvas.width;
            const height = colorCanvas.height;
            const centerX = width / 2;
            const centerY = height / 2;
            const radius = Math.min(centerX, centerY) - 5;
            
            // Ê∏ÖÈô§ÁîªÂ∏É
            ctx.clearRect(0, 0, width, height);
            
            // ÁªòÂà∂Ëâ≤Áõ∏ÁéØ
            for (let angle = 0; angle < 360; angle++) {
                const startAngle = (angle - 0.5) * Math.PI / 180;
                const endAngle = (angle + 0.5) * Math.PI / 180;
                
                ctx.beginPath();
                ctx.moveTo(centerX, centerY);
                ctx.arc(centerX, centerY, radius, startAngle, endAngle);
                ctx.closePath();
                
                const hue = angle;
                ctx.fillStyle = `hsl(${hue}, 100%, 50%)`;
                ctx.fill();
            }
            
            // ÁªòÂà∂È•±ÂíåÂ∫¶Âíå‰∫ÆÂ∫¶ÊñπÂùó
            const squareSize = radius * 1.4;
            const squareX = centerX - squareSize / 2;
            const squareY = centerY - squareSize / 2;
            
            // ÂàõÂª∫Ê∏êÂèò
            const satGradient = ctx.createLinearGradient(squareX, squareY, squareX + squareSize, squareY);
            satGradient.addColorStop(0, `hsl(${currentColor.h}, 0%, 50%)`);
            satGradient.addColorStop(1, `hsl(${currentColor.h}, 100%, 50%)`);
            
            ctx.fillStyle = satGradient;
            ctx.fillRect(squareX, squareY, squareSize, squareSize);
            
            const lightGradient = ctx.createLinearGradient(squareX, squareY, squareX, squareY + squareSize);
            lightGradient.addColorStop(0, 'rgba(255, 255, 255, 1)');
            lightGradient.addColorStop(0.5, 'rgba(255, 255, 255, 0)');
            lightGradient.addColorStop(1, 'rgba(0, 0, 0, 1)');
            
            ctx.fillStyle = lightGradient;
            ctx.fillRect(squareX, squareY, squareSize, squareSize);
            
            // ÁªòÂà∂ÂΩìÂâçÈ¢úËâ≤‰ΩçÁΩÆÊåáÁ§∫Âô®
            const satPercent = currentColor.s / 100;
            const lightPercent = currentColor.l / 100;
            const adjustedLightPercent = lightPercent * 2 - 1;
            
            const indicatorX = squareX + squareSize * satPercent;
            const indicatorY = squareY + squareSize * (1 - (adjustedLightPercent + 1) / 2);
            
            ctx.beginPath();
            ctx.arc(indicatorX, indicatorY, 8, 0, Math.PI * 2);
            ctx.strokeStyle = lightPercent > 0.5 ? 'black' : 'white';
            ctx.lineWidth = 2;
            ctx.stroke();
            ctx.closePath();
        }
        
        // Êõ¥Êñ∞È¢úËâ≤È¢ÑËßà
        function updateColorPreview() {
            const hexColor = rgbToHex(currentColor.r, currentColor.g, currentColor.b);
            colorPreview.style.backgroundColor = hexColor;
            
            // Êõ¥Êñ∞È¢úËâ≤ÂÄºÊòæÁ§∫
            hexValue.value = hexColor;
            rgbValue.value = `rgb(${currentColor.r}, ${currentColor.g}, ${currentColor.b})`;
            hslValue.value = `hsl(${Math.round(currentColor.h)}, ${Math.round(currentColor.s)}%, ${Math.round(currentColor.l)}%)`;
            
            // Êõ¥Êñ∞RGBÊªëÂùó
            redSlider.value = currentColor.r;
            greenSlider.value = currentColor.g;
            blueSlider.value = currentColor.b;
            redValue.value = currentColor.r;
            greenValue.value = currentColor.g;
            blueValue.value = currentColor.b;
            
            // Êõ¥Êñ∞HSLÊªëÂùó
            hueSlider.value = currentColor.h;
            saturationSlider.value = currentColor.s;
            lightnessSlider.value = currentColor.l;
            hueValue.value = Math.round(currentColor.h);
            saturationValue.value = Math.round(currentColor.s);
            lightnessValue.value = Math.round(currentColor.l);
            
            // Êõ¥Êñ∞Ê∏êÂèò
            gradientColor1.value = hexColor;
            updateGradient();
            
            // Êõ¥Êñ∞È¢úËâ≤ÂíåË∞ê
            updateHarmonyColors();
            
            // ÈáçÁªòÈ¢úËâ≤ËΩÆ
            drawColorWheel();
        }
        
        // Êõ¥Êñ∞È¢úËâ≤ÂíåË∞ê
        function updateHarmonyColors() {
            harmonyColors.innerHTML = '';
            
            // Ëé∑ÂèñÂΩìÂâçÈÄâ‰∏≠ÁöÑÂíåË∞êÁ±ªÂûã
            const activeHarmony = document.querySelector('.harmony-option.active').dataset.harmony;
            
            // ËÆ°ÁÆóÂíåË∞êÈ¢úËâ≤
            let colors = [];
            
            switch (activeHarmony) {
                case 'complementary':
                    colors = [
                        { h: currentColor.h, s: currentColor.s, l: currentColor.l },
                        { h: (currentColor.h + 180) % 360, s: currentColor.s, l: currentColor.l }
                    ];
                    break;
                    
                case 'analogous':
                    colors = [
                        { h: (currentColor.h - 30 + 360) % 360, s: currentColor.s, l: currentColor.l },
                        { h: currentColor.h, s: currentColor.s, l: currentColor.l },
                        { h: (currentColor.h + 30) % 360, s: currentColor.s, l: currentColor.l }
                    ];
                    break;
                    
                case 'triadic':
                    colors = [
                        { h: currentColor.h, s: currentColor.s, l: currentColor.l },
                        { h: (currentColor.h + 120) % 360, s: currentColor.s, l: currentColor.l },
                        { h: (currentColor.h + 240) % 360, s: currentColor.s, l: currentColor.l }
                    ];
                    break;
                    
                case 'split-complementary':
                    colors = [
                        { h: currentColor.h, s: currentColor.s, l: currentColor.l },
                        { h: (currentColor.h + 150) % 360, s: currentColor.s, l: currentColor.l },
                        { h: (currentColor.h + 210) % 360, s: currentColor.s, l: currentColor.l }
                    ];
                    break;
                    
                case 'tetradic':
                    colors = [
                        { h: currentColor.h, s: currentColor.s, l: currentColor.l },
                        { h: (currentColor.h + 90) % 360, s: currentColor.s, l: currentColor.l },
                        { h: (currentColor.h + 180) % 360, s: currentColor.s, l: currentColor.l },
                        { h: (currentColor.h + 270) % 360, s: currentColor.s, l: currentColor.l }
                    ];
                    break;
            }
            
            // Ê∏≤ÊüìÂíåË∞êÈ¢úËâ≤
            colors.forEach(color => {
                const rgb = hslToRgb(color.h, color.s, color.l);
                const hexColor = rgbToHex(rgb.r, rgb.g, rgb.b);
                
                const colorElement = document.createElement('div');
                colorElement.className = 'harmony-color';
                colorElement.style.backgroundColor = hexColor;
                colorElement.dataset.hex = hexColor;
                colorElement.dataset.h = color.h;
                colorElement.dataset.s = color.s;
                colorElement.dataset.l = color.l;
                
                colorElement.addEventListener('click', () => {
                    const h = parseInt(colorElement.dataset.h);
                    const s = parseInt(colorElement.dataset.s);
                    const l = parseInt(colorElement.dataset.l);
                    const rgb = hslToRgb(h, s, l);
                    
                    currentColor = {
                        r: rgb.r,
                        g: rgb.g,
                        b: rgb.b,
                        h: h,
                        s: s,
                        l: l
                    };
                    
                    updateColorPreview();
                    addToColorHistory(rgbToHex(rgb.r, rgb.g, rgb.b));
                });
                
                colorElement.addEventListener('mouseover', (e) => {
                    showTooltip(e, hexColor);
                });
                
                colorElement.addEventListener('mouseout', () => {
                    hideTooltip();
                });
                
                harmonyColors.appendChild(colorElement);
            });
        }
        
        // ‰øùÂ≠òÈ¢úËâ≤Âà∞ÂéÜÂè≤ËÆ∞ÂΩï
        function addToColorHistory(hexColor) {
            // Ê£ÄÊü•È¢úËâ≤ÊòØÂê¶Â∑≤Â≠òÂú®
            const existingIndex = colorHistory.indexOf(hexColor);
            if (existingIndex !== -1) {
                // Â¶ÇÊûúÂ≠òÂú®ÔºåÁßªÈô§ÂÆÉ
                colorHistory.splice(existingIndex, 1);
            }
            
            // Ê∑ªÂä†Âà∞ÂºÄÂ§¥
            colorHistory.unshift(hexColor);
            
            // ÈôêÂà∂ÂéÜÂè≤ËÆ∞ÂΩïÈïøÂ∫¶
            if (colorHistory.length > maxHistoryItems) {
                colorHistory.pop();
            }
            
            // Êõ¥Êñ∞ÂéÜÂè≤ËÆ∞ÂΩïÊòæÁ§∫
            updateColorHistoryDisplay();
            
            // ‰øùÂ≠òÂà∞Êú¨Âú∞Â≠òÂÇ®
            localStorage.setItem('colorHistory', JSON.stringify(colorHistory));
        }
        
        // Êõ¥Êñ∞È¢úËâ≤ÂéÜÂè≤ËÆ∞ÂΩïÊòæÁ§∫
        function updateColorHistoryDisplay() {
            colorHistoryContainer.innerHTML = '';
            
            colorHistory.forEach(hexColor => {
                const colorElement = document.createElement('div');
                colorElement.className = 'history-color';
                colorElement.style.backgroundColor = hexColor;
                
                colorElement.addEventListener('click', () => {
                    const rgb = hexToRgb(hexColor);
                    const hsl = rgbToHsl(rgb.r, rgb.g, rgb.b);
                    
                    currentColor = {
                        r: rgb.r,
                        g: rgb.g,
                        b: rgb.b,
                        h: hsl.h,
                        s: hsl.s,
                        l: hsl.l
                    };
                    
                    updateColorPreview();
                });
                
                colorElement.addEventListener('mouseover', (e) => {
                    showTooltip(e, hexColor);
                });
                
                colorElement.addEventListener('mouseout', () => {
                    hideTooltip();
                });
                
                colorHistoryContainer.appendChild(colorElement);
            });
        }
        
        // ‰ªéÊú¨Âú∞Â≠òÂÇ®Âä†ËΩΩÈ¢úËâ≤ÂéÜÂè≤
        function loadColorHistory() {
            const savedHistory = localStorage.getItem('colorHistory');
            if (savedHistory) {
                colorHistory = JSON.parse(savedHistory);
                updateColorHistoryDisplay();
            }
        }
        
        // ÊòæÁ§∫Â∑•ÂÖ∑ÊèêÁ§∫
        function showTooltip(e, text) {
            tooltip.textContent = text;
            tooltip.style.left = `${e.pageX + 10}px`;
            tooltip.style.top = `${e.pageY + 10}px`;
            tooltip.style.opacity = '1';
        }
        
        // ÈöêËóèÂ∑•ÂÖ∑ÊèêÁ§∫
        function hideTooltip() {
            tooltip.style.opacity = '0';
        }
        
        // ÊòæÁ§∫ÈÄöÁü•
        function showNotification(message) {
            notificationMessage.textContent = message;
            notification.classList.add('show');
            
            // 5ÁßíÂêéËá™Âä®ÈöêËóè
            setTimeout(() => {
                hideNotification();
            }, 5000);
        }
        
        // ÈöêËóèÈÄöÁü•
        function hideNotification() {
            notification.classList.remove('show');
        }
        
        // ËÆæÁΩÆ‰∫ã‰ª∂ÁõëÂê¨Âô®
        function setupEventListeners() {
            // RGBÊªëÂùó‰∫ã‰ª∂
            redSlider.addEventListener('input', () => {
                currentColor.r = parseInt(redSlider.value);
                redValue.value = currentColor.r;
                
                const hsl = rgbToHsl(currentColor.r, currentColor.g, currentColor.b);
                currentColor.h = hsl.h;
                currentColor.s = hsl.s;
                currentColor.l = hsl.l;
                
                updateColorPreview();
            });
            
            greenSlider.addEventListener('input', () => {
                currentColor.g = parseInt(greenSlider.value);
                greenValue.value = currentColor.g;
                
                const hsl = rgbToHsl(currentColor.r, currentColor.g, currentColor.b);
                currentColor.h = hsl.h;
                currentColor.s = hsl.s;
                currentColor.l = hsl.l;
                
                updateColorPreview();
            });
            
            blueSlider.addEventListener('input', () => {
                currentColor.b = parseInt(blueSlider.value);
                blueValue.value = currentColor.b;
                
                const hsl = rgbToHsl(currentColor.r, currentColor.g, currentColor.b);
                currentColor.h = hsl.h;
                currentColor.s = hsl.s;
                currentColor.l = hsl.l;
                
                updateColorPreview();
            });
            
            // RGBÊï∞ÂÄºËæìÂÖ•‰∫ã‰ª∂
            redValue.addEventListener('change', () => {
                let val = parseInt(redValue.value);
                val = isNaN(val) ? 0 : Math.max(0, Math.min(255, val));
                currentColor.r = val;
                redValue.value = val;
                redSlider.value = val;
                
                const hsl = rgbToHsl(currentColor.r, currentColor.g, currentColor.b);
                currentColor.h = hsl.h;
                currentColor.s = hsl.s;
                currentColor.l = hsl.l;
                
                updateColorPreview();
            });
            
            greenValue.addEventListener('change', () => {
                let val = parseInt(greenValue.value);
                val = isNaN(val) ? 0 : Math.max(0, Math.min(255, val));
                currentColor.g = val;
                greenValue.value = val;
                greenSlider.value = val;
                
                const hsl = rgbToHsl(currentColor.r, currentColor.g, currentColor.b);
                currentColor.h = hsl.h;
                currentColor.s = hsl.s;
                currentColor.l = hsl.l;
                
                updateColorPreview();
            });
            
            blueValue.addEventListener('change', () => {
                let val = parseInt(blueValue.value);
                val = isNaN(val) ? 0 : Math.max(0, Math.min(255, val));
                currentColor.b = val;
                blueValue.value = val;
                blueSlider.value = val;
                
                const hsl = rgbToHsl(currentColor.r, currentColor.g, currentColor.b);
                currentColor.h = hsl.h;
                currentColor.s = hsl.s;
                currentColor.l = hsl.l;
                
                updateColorPreview();
            });
            
            // HSLÊªëÂùó‰∫ã‰ª∂
            hueSlider.addEventListener('input', () => {
                currentColor.h = parseInt(hueSlider.value);
                hueValue.value = currentColor.h;
                
                const rgb = hslToRgb(currentColor.h, currentColor.s, currentColor.l);
                currentColor.r = rgb.r;
                currentColor.g = rgb.g;
                currentColor.b = rgb.b;
                
                updateColorPreview();
            });
            
            saturationSlider.addEventListener('input', () => {
                currentColor.s = parseInt(saturationSlider.value);
                saturationValue.value = currentColor.s;
                
                const rgb = hslToRgb(currentColor.h, currentColor.s, currentColor.l);
                currentColor.r = rgb.r;
                currentColor.g = rgb.g;
                currentColor.b = rgb.b;
                
                updateColorPreview();
            });
            
            lightnessSlider.addEventListener('input', () => {
                currentColor.l = parseInt(lightnessSlider.value);
                lightnessValue.value = currentColor.l;
                
                const rgb = hslToRgb(currentColor.h, currentColor.s, currentColor.l);
                currentColor.r = rgb.r;
                currentColor.g = rgb.g;
                currentColor.b = rgb.b;
                
                updateColorPreview();
            });
            
            // HSLÊï∞ÂÄºËæìÂÖ•‰∫ã‰ª∂
            hueValue.addEventListener('change', () => {
                let val = parseInt(hueValue.value);
                val = isNaN(val) ? 0 : Math.max(0, Math.min(360, val));
                currentColor.h = val;
                hueValue.value = val;
                hueSlider.value = val;
                
                const rgb = hslToRgb(currentColor.h, currentColor.s, currentColor.l);
                currentColor.r = rgb.r;
                currentColor.g = rgb.g;
                currentColor.b = rgb.b;
                
                updateColorPreview();
            });
            
            saturationValue.addEventListener('change', () => {
                let val = parseInt(saturationValue.value);
                val = isNaN(val) ? 0 : Math.max(0, Math.min(100, val));
                currentColor.s = val;
                saturationValue.value = val;
                saturationSlider.value = val;
                
                const rgb = hslToRgb(currentColor.h, currentColor.s, currentColor.l);
                currentColor.r = rgb.r;
                currentColor.g = rgb.g;
                currentColor.b = rgb.b;
                
                updateColorPreview();
            });
            
            lightnessValue.addEventListener('change', () => {
                let val = parseInt(lightnessValue.value);
                val = isNaN(val) ? 0 : Math.max(0, Math.min(100, val));
                currentColor.l = val;
                lightnessValue.value = val;
                lightnessSlider.value = val;
                
                const rgb = hslToRgb(currentColor.h, currentColor.s, currentColor.l);
                currentColor.r = rgb.r;
                currentColor.g = rgb.g;
                currentColor.b = rgb.b;
                
                updateColorPreview();
            });
            
            // È¢úËâ≤ËæìÂÖ•Ê°Ü‰∫ã‰ª∂
            hexValue.addEventListener('change', () => {
                const hex = hexValue.value;
                const rgb = hexToRgb(hex);
                
                if (rgb) {
                    currentColor.r = rgb.r;
                    currentColor.g = rgb.g;
                    currentColor.b = rgb.b;
                    
                    const hsl = rgbToHsl(rgb.r, rgb.g, rgb.b);
                    currentColor.h = hsl.h;
                    currentColor.s = hsl.s;
                    currentColor.l = hsl.l;
                    
                    updateColorPreview();
                    addToColorHistory(hex);
                }
            });
            
            // Â§çÂà∂ÊåâÈíÆ‰∫ã‰ª∂
            document.getElementById('copyHex').addEventListener('click', () => {
                navigator.clipboard.writeText(hexValue.value)
                    .then(() => {
                        showNotification('HEXÈ¢úËâ≤‰ª£Á†ÅÂ∑≤Â§çÂà∂Âà∞Ââ™Ë¥¥Êùø');
                    })
                    .catch(err => {
                        console.error('Â§çÂà∂Â§±Ë¥•:', err);
                    });
            });
            
            document.getElementById('copyRgb').addEventListener('click', () => {
                navigator.clipboard.writeText(rgbValue.value)
                    .then(() => {
                        showNotification('RGBÈ¢úËâ≤‰ª£Á†ÅÂ∑≤Â§çÂà∂Âà∞Ââ™Ë¥¥Êùø');
                    })
                    .catch(err => {
                        console.error('Â§çÂà∂Â§±Ë¥•:', err);
                    });
            });
            
            document.getElementById('copyHsl').addEventListener('click', () => {
                navigator.clipboard.writeText(hslValue.value)
                    .then(() => {
                        showNotification('HSLÈ¢úËâ≤‰ª£Á†ÅÂ∑≤Â§çÂà∂Âà∞Ââ™Ë¥¥Êùø');
                    })
                    .catch(err => {
                        console.error('Â§çÂà∂Â§±Ë¥•:', err);
                    });
            });
            
            // È¢úËâ≤ËΩÆ‰∫ã‰ª∂
            colorCanvas.addEventListener('mousedown', (e) => {
                handleColorWheelInteraction(e);
                
                document.addEventListener('mousemove', handleColorWheelInteraction);
                document.addEventListener('mouseup', () => {
                    document.removeEventListener('mousemove', handleColorWheelInteraction);
                    addToColorHistory(rgbToHex(currentColor.r, currentColor.g, currentColor.b));
                }, { once: true });
            });
            
            // È¢úËâ≤ÂíåË∞êÈÄâÈ°π‰∫ã‰ª∂
            harmonyOptions.forEach(option => {
                option.addEventListener('click', () => {
                    harmonyOptions.forEach(opt => opt.classList.remove('active'));
                    option.classList.add('active');
                    updateHarmonyColors();
                });
            });
            
            // Ê∏êÂèòÈ¢úËâ≤ÈÄâÊã©‰∫ã‰ª∂
            gradientColor1.addEventListener('input', updateGradient);
            gradientColor2.addEventListener('input', updateGradient);
            
            // Â±èÂπïÂèñËâ≤Âô®‰∫ã‰ª∂
            if (window.EyeDropper) {
                eyedropperButton.addEventListener('click', async () => {
                    try {
                        const eyeDropper = new EyeDropper();
                        const result = await eyeDropper.open();
                        const hex = result.sRGBHex;
                        const rgb = hexToRgb(hex);
                        
                        if (rgb) {
                            currentColor.r = rgb.r;
                            currentColor.g = rgb.g;
                            currentColor.b = rgb.b;
                            
                            const hsl = rgbToHsl(rgb.r, rgb.g, rgb.b);
                            currentColor.h = hsl.h;
                            currentColor.s = hsl.s;
                            currentColor.l = hsl.l;
                            
                            updateColorPreview();
                            addToColorHistory(hex);
                        }
                    } catch (error) {
                        console.error('Â±èÂπïÂèñËâ≤Âô®ÈîôËØØ:', error);
                    }
                });
            } else {
                eyedropperButton.style.display = 'none';
            }
            
            // ‰∏ªÈ¢òÂàáÊç¢‰∫ã‰ª∂
            themeSwitch.addEventListener('click', () => {
                document.body.classList.toggle('dark-mode');
                if (document.body.classList.contains('dark-mode')) {
                    localStorage.setItem('theme', 'dark');
                } else {
                    localStorage.setItem('theme', 'light');
                }
            });
            
            // ÈÄöÁü•ÂÖ≥Èó≠ÊåâÈíÆ‰∫ã‰ª∂
            notificationClose.addEventListener('click', hideNotification);
            
            // Âä†ËΩΩ‰øùÂ≠òÁöÑ‰∏ªÈ¢ò
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme === 'dark') {
                document.body.classList.add('dark-mode');
            }
        }
        
        // Â§ÑÁêÜÈ¢úËâ≤ËΩÆ‰∫§‰∫í
        function handleColorWheelInteraction(e) {
            const rect = colorCanvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            
            const width = colorCanvas.width;
            const height = colorCanvas.height;
            const centerX = width / 2;
            const centerY = height / 2;
            const radius = Math.min(centerX, centerY) - 5;
            
            const squareSize = radius * 1.4;
            const squareX = centerX - squareSize / 2;
            const squareY = centerY - squareSize / 2;
            
            // Ê£ÄÊü•ÁÇπÂáªÊòØÂê¶Âú®ÊñπÂùóÂÜÖ
            if (x >= squareX && x <= squareX + squareSize && y >= squareY && y <= squareY + squareSize) {
                // ËÆ°ÁÆóÈ•±ÂíåÂ∫¶Âíå‰∫ÆÂ∫¶
                const satPercent = (x - squareX) / squareSize;
                const lightPercent = 1 - (y - squareY) / squareSize;
                
                currentColor.s = Math.max(0, Math.min(100, Math.round(satPercent * 100)));
                currentColor.l = Math.max(0, Math.min(100, Math.round(lightPercent * 100)));
                
                const rgb = hslToRgb(currentColor.h, currentColor.s, currentColor.l);
                currentColor.r = rgb.r;
                currentColor.g = rgb.g;
                currentColor.b = rgb.b;
                
                updateColorPreview();
            }
        }
        
        // ËÆæÁΩÆÈ¢ÑËÆæÈ¢úËâ≤ÁöÑÁÇπÂáª‰∫ã‰ª∂
        function setupPresetEvents() {
            const presetColors = document.querySelectorAll('.preset-color');
            presetColors.forEach(preset => {
                preset.addEventListener('click', () => {
                    const colors = preset.dataset.colors.split(',');
                    if (colors.length >= 2) {
                        // Êõ¥Êñ∞Ê∏êÂèòÈ¢úËâ≤
                        gradientColor1.value = colors[0];
                        gradientColor2.value = colors[1];
                        
                        // Êõ¥Êñ∞Ê∏êÂèòËâ≤Êï∞ÁªÑ
                        gradientColors[0].color = colors[0];
                        gradientColors[gradientColors.length - 1].color = colors[1];
                        
                        // Â¶ÇÊûúÊúâÊõ¥Â§öÈ¢úËâ≤ÔºåÊ∑ªÂä†‰∏∫‰∏≠Èó¥Ëâ≤Ê†á
                        if (colors.length > 2) {
                            gradientColors = [
                                { color: colors[0], position: 0 },
                                { color: colors[colors.length - 1], position: 100 }
                            ];
                            
                            // Ê∑ªÂä†‰∏≠Èó¥Ëâ≤Ê†á
                            for (let i = 1; i < colors.length - 1; i++) {
                                const position = Math.round((i / (colors.length - 1)) * 100);
                                gradientColors.push({ color: colors[i], position: position });
                            }
                            
                            gradientColors.sort((a, b) => a.position - b.position);
                        }
                        
                        // Êõ¥Êñ∞Ê∏êÂèòÊòæÁ§∫
                        updateGradientColorStops();
                        updateGradient();
                    }
                });
            });
        }
        
        // ÂàùÂßãÂåñÂ∫îÁî®
        window.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
